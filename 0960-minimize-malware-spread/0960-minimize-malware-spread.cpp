class Solution {
public:
    vector<vector<int>> g;
    vector<bool> vis;
    vector<bool> init;
    int n;
    void dfs(int u, int p, int& sz, vector<int> &nodes) {
        vis[u] = 1;
        if (init[u]) nodes.push_back(u);
        sz++;
        for (auto v : g[u]) if (v != p && !vis[v]) {
            dfs(v, u, sz, nodes);
        }
    }
    int minMalwareSpread(vector<vector<int>>& graph, vector<int>& initial) {
        n = graph.size();
        vis.resize(n);
        init.resize(n);
        g.resize(n);
        for (int i = 0; i < n; i++)
            for (int j = 0; j < n; j++) if (i != j && graph[i][j]) g[i].push_back(j);
        for (auto x : initial) init[x] = 1;
        int eli = -1, mn = INT_MAX;
        for (int i = 0; i < n; i++) if (!vis[i]) {
            int sz = 0;
            vector<int> nodes;
            dfs(i, -1, sz, nodes);
            if (nodes.empty()) continue;
            int can = nodes.size() == 1 ? sz : 0;
            sort(nodes.begin(), nodes.end());
            if (eli < can) {
                eli = can;
                mn = nodes[0];
            } else if (eli == can) {
                mn = min(mn, nodes[0]);
            }
        }
        return mn;
    }
};